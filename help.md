#1. Gencal User Manual
Gencal is a Python application that generates gcode to be sent
to a laser engraver with a GRBL controller.
The generated gcode contains test/s that a user configures
to try different laser powers and XY feed rates for a project.

Gencal has the following features:
* Coded in 100% pure Python, using the `tkinter` GUI toolkit
* The user can select any of the following tests to be included in
the gcode that is generated
    1. "Cut Cal." - cuts a user specified rectangle
    1. "Engrave Cal." - engraves a bar varying the power
    (very useful for projects that include 3d grayscale engraving)
    1. "Picture Cal." - engraves dots, dashes and a dithered picture
* Viewing of the generated gcode

The Gencal window is divided into
2 frames with a menubar over the top of both frames. The frame
on the left contains settings the user can modify to control
each calibration test.
The frame on the right contains a button to generate the gcode
and a viewing frame for the gcode that was generated.  

![](Icons/mainWindow.gif)

##1.1. Menus
The menubar contains 2 menu lists (File and Help).
###1.1.1. File menu
**Save As...**  
>Save the current generated gcode to a file.  

**Exit**  
>Close all windows and quit Gencal.

###1.1.2. Help menu
**About Gencal**  
>Display version and more... (Readme, News, ToDo, and Credits files).

**Gencal Help**  
>Display the help file for Gencal detailing the menus, basic operations,
and other tips.

##1.2. Basic Operation
The basic flow is to select the calibration tests to be included
and adjust their settings using the input widgets in the
left frame. The gcode is then generated by left clicking on the
green "Generate Gcode" button in the frame on the right side of the window.
The gcode will then be shown in the text box below the "Generate Gcode"
button. If satisfied with the gcode shown, it can be
saved to a file using the "Save As..." dialog box in the "File"
menu list.  
The following sections go through each grouping of user specified
settings in the left side frame.  

###1.2.1. Common
The settings in this group are common to all calibration tests.  
<br />

**Toggle Units**  
This button toggles the units used in generating the gcode between
millimeters (mm is default) and inches. Left clicking the mouse on this button
causes the toggle. The controller is sent either "G21" (mm) or "G20"
(inches) and the controller will interpret the XY values based on the
this selection  
<br />

**kerf size**  
This value sets the kerf size of the laser (.2 is default).
Use of this setting is as follows:  
* "Cut Cal." - not used (kerf size can be calculated by measurements of the box cut in this test)
* "Engrave Cal." - laser moves increments of the kerf size in the Y
direction until the "Width of bar to engrave" is reached.
* "Picture Cal." - used in the creation of the double dots and calculation of the "Dash Length".
<br />

**Y Gap between cal. tests**  
If multiple calibration tests are included, this value controls
distance to skip in the Y direction between calibration tests.

###1.2.2. Cut Cal.
The cut calibration test directs the laser to cut a box from
the material you are testing.
The widgets in this section contain the settings to control this
test.  
<br />

**Include Cut gcode**  
Left clicking on the checkbox toggles between including or
not including this test in the gcode that is generated.
If the box has a check mark in it, the test is included
(by default the box does not have a check mark)  
<br />

**Feed Rate**  
This value controls the rate that the laser
is moved as it is cutting. In the gcode this value is passed
to the controller using the 'F' command.  
<br />

**Laser Power**  
For lasers that use PWM (Pulse Width Modulation) to control the
power of the beam. This value is sent to the controller using
the 'S' command.  
<br />

**X Dim. of box**  
This value sets the X dimension of the box to be
cut.  
<br />

**Y Dim. of box**  
This value sets the Y dimension of the box to be
cut.  
<br />

**Number of passes**  
This value sets the number of passes the laser
will make to cut through the material under test.

###1.2.3. Engrave Cal.
The engrave calibration test directs the laser to create a
trench/bar varying the power of the laser in the X direction.
The width of the bar is in the Y direction and above
the bar are indexing marks showing where power changes were made.  
<br />

**Include Engrave gcode**  
Left clicking on the checkbox toggles between including or
not including this test in the gcode that is generated.
If the box has a check mark in it, the test is included
(by default the box does not have a check mark)  
<br />

**Feed Rate**  
This value controls the rate that the laser
is moved as it is engraving. In the gcode this value is passed
to the controller using the 'F' command.  
<br />

**Max. Power**  
For lasers that use PWM (Pulse Width Modulation) to control the
power of the beam.
This value sets the maximum power value for the range of power
sent to the controller in this test. Power values are sent to
the controller using the 'S' command.  
<br />

**Min. Power**  
For lasers that use PWM (Pulse Width Modulation) to control the
power of the beam.
This value sets the minimum power value for the range of power
sent to the controller in this test. Power values are sent to
the controller using the 'S' command.  
<br />

**Number of Power levels in bar**  
This value sets the number of power changes to be made between
the power range created by the Min. and Max. Power values.  
<br />

**Distance between power changes**  
This value sets the distance in the X direction between changes
of the power.  
<br />

**Length of engrave bar = [calculated length]**  
This is label shows the calculated length of the bar in the X
direction  
("Number of Power levels in bar" * "Distance between power changes")  
This value is updated when the "Enter" key is pushed in either
the "Number of Power levels in bar" or "Distance between power changes"
entry widgets.  
<br />

**Width of bar to engrave**  
This value specifies the width of the bar in the Y direction.
After each pass in the X direction, the laser is moved by the "kerf size"
in the Y direction for the next pass in the X direction.
This repeats until laser has reached this value in the Y direction.  
<br />

**Power to use for index marks**  
For lasers that use PWM (Pulse Width Modulation) to control the
power of the beam.
This value sets the laser power to be used when the index marks
are created. Power values are sent to the controller using the 'S' command.  
<br />

**Maximum length of index marks**  
This value specifies the maximum length of the index marks in the
Y direction.
The marks are engraved in the Y direction at each power change
in the X direction for the length of the bar.

###1.2.4. Picture Cal.
The picture calibration test directs the laser to create 3
lines containing dots and/or dashes (lines are engraved in the X direction).
A dithered image can also be included.  
The 3 lines consist of:  
1. a line of single kerf size dots
2. a line of double kerf size dots (in both X and Y directions)
3. a line of 3 dashes followed by 2 kerf size dots followed by 3
dashes (_ _ _ . . _ _ _)  
<br />

**Include Picture gcode**  
Left clicking on the checkbox toggles between including or
not including this test in the gcode that is generated.
If the box has a check mark in it, the test is included
(by default the box does not have a check mark)  
<br />

**Feed Rate**  
This value controls the rate that the laser
is moved as it is engraving. In the gcode this value is passed
to the controller using the 'F' command.  
<br />

**Laser Power**  
For lasers that use PWM (Pulse Width Modulation) to control the
power of the beam. This value is sent to the controller using
the 'S' command.  
<br />

**Separation between lines in the Y axis**  
This value controls the spacing of the 3 lines in the Y direction.  
<br />

**Single dots separation**  
This value controls the distance between single dots in the first line created.  
<br />

**Number of Single dots**  
This value controls the number of dots that will be created in the first line
of dots.  
<br />

**Double dots separation**  
This value controls the distance between dots in the second line created.  
<br />

**Number of Double dots**  
This value controls the number of double dots that will be created in the second line
of dots.  
<br />

**Pattern Test**  
This label is just a separator to show where the setting for the
third line starts.  
<br />

**Dash Length = (kerf\*x)**  
This value controls the length of the dashes created in
the third line. Length is equal to "kerf size"
multiplied by this value.  
<br />

**Separation size**  
This value controls the distance between dots and dashes that will be created
in the third line.  
<br />

**Include Dithered image gcode**  
Left clicking on the checkbox toggles between including or
not including the gcode for a dithered image.
If the box has a check mark in it, the gcode for the image is included
(by default the box does not have a check mark)  
<br />

**Dithered Image Filename**  
This is the file name contains the gcode for the dithered image
to be included.
The dithered image gcode has been modified so that Gencal can change the Feed rate
and Laser Power.
The feed command was changed from "Fxx" (where xx was a number)
to "Feed".
The power command that turned the laser on  was changed from "Sxx"
(where xx was a number) to "Spwr".
If a gcode file is specified that doesn't have these changes, it will be append to
the generated code as is.
